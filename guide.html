<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nocturnal Guide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --glow-color: #facc15;
            --secondary-glow: #eab308;
        }

        html, body {
            height: 100%;
            background-color: #0a0a0a;
            color: #e5e5e5;
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            overflow-x: hidden;
            background-image: radial-gradient(circle at 50% 10%, rgba(250, 204, 21, 0.05) 0%, rgba(10, 10, 10, 1) 40%);
        }

        .container {
            max-width: 1024px;
            margin-left: auto;
            margin-right: auto;
            padding: 2rem 1rem;
            display: flex;
            flex-direction: column;
            gap: 4rem;
        }

        .title-card {
            background: rgba(26, 26, 26, 0.5);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(42, 42, 42, 0.7);
            box-shadow: 0 0 40px rgba(0, 0, 0, 0.5), inset 0 0 10px rgba(255, 255, 255, 0.05);
            padding: 2.5rem;
            border-radius: 1.5rem;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            animation: fadeIn 1s ease-out;
        }

        .glow-text {
            text-shadow: 0 0 8px var(--glow-color), 0 0 15px var(--glow-color), 0 0 25px var(--glow-color);
        }

        .card {
            background-color: #1a1a1a;
            border: 1px solid #2a2a2a;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
            border-radius: 1rem;
            padding: 2rem;
            position: relative;
            z-index: 10;
        }

        .card-header {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--glow-color);
            margin-bottom: 1rem;
            text-shadow: 0 0 5px rgba(250, 204, 21, 0.5);
            position: relative;
            padding-left: 5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .card-header::before {
            content: counter(step-counter);
            counter-increment: step-counter;
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            font-size: 2rem;
            font-weight: 700;
            color: #2a2a2a;
            border: 2px solid #3a3a3a;
            width: 3rem;
            height: 3rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background-color: #0a0a0a;
            transition: all 0.3s ease;
        }

        .card.active-step .card-header::before {
            transform: translateY(-50%) scale(1.1);
            border-color: var(--glow-color);
            color: var(--glow-color);
        }

        .content {
            color: #a0a0a0;
        }
        
        .glow-divider {
            height: 2px;
            width: 80%;
            margin: 2rem auto;
            background-image: linear-gradient(to right, transparent, rgba(250, 204, 21, 0.3), transparent);
            box-shadow: 0 0 10px rgba(250, 204, 21, 0.5);
            border-radius: 9999px;
        }

        .icon-decoration {
            width: 300px;
            height: auto;
            filter: drop-shadow(0 0 15px var(--glow-color)) drop-shadow(0 0 30px var(--secondary-glow));
            margin-bottom: 1rem;
            animation: pulse 4s infinite ease-in-out;
        }

        .subtitle {
            font-size: 1.25rem;
            font-weight: 500;
            color: #d4d4d4;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0%, 100% { filter: drop-shadow(0 0 15px var(--glow-color)) drop-shadow(0 0 30px var(--secondary-glow)); }
            50% { filter: drop-shadow(0 0 25px var(--glow-color)) drop-shadow(0 0 50px var(--secondary-glow)); }
        }

        @media (min-width: 768px) {
            .container {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 2rem;
                padding: 4rem 2rem;
            }
            .full-span {
                grid-column: 1 / 3;
            }
            .title-card {
                padding: 4rem;
                margin-top: 2rem;
                margin-bottom: 2rem;
            }
            .card {
                padding: 3rem;
            }
        }
    </style>
</head>
<body class="overscroll-none">
    <div class="container" style="counter-reset: step-counter;">
        <!-- Title Card -->
        <div class="title-card full-span">
            <img src="icons/transparent.png" alt="Nocturnal Owl Icon" class="icon-decoration"/>
            <h1 class="text-4xl sm:text-5xl font-bold glow-text">Nocturnal</h1>
            <p class="mt-4 text-gray-400 max-w-2xl">
                This guide explains how to perform <strong>Nocturnal</strong>, a unique digital illusion using two connected web apps.
            </p>
        </div>

        <div class="card full-span">
            <h3 class="card-header">How It Works</h3>
            <div class="content">
                <p class="text-lg font-medium text-gray-300 mb-2">The trick works by using two connected web apps.</p>
                <ul class="list-disc list-inside space-y-2">
                    <li>Your remote control app and their Receiver Page are connected to a single, shared database on Firebase.</li>
                    <li>When you press the <strong>Power</strong> button, you are simply changing a value in this database from <code>true</code> to <code>false</code> (or vice versa). Their phone is constantly listening for this change and reacts instantly.</li>
                    <li>When you type a name and press <strong>Search</strong>, you update the same database with a new `searchCommand` that contains the name and a timestamp. Their phone sees this update and immediately executes the search.</li>
                </ul>
                <p class="mt-4">The magic is in the timing and presentation. The technology is simply a tool to create the illusion.</p>
            </div>
        </div>

        <!-- The Trick -->
        <div class="card">
            <h3 class="card-header">The Setup: Connecting the Devices</h3>
            <div class="content">
                <p>The secret of Nocturnal is in two web applications that communicate with each other. You need two devices: one for you (the <strong>remote control app</strong>) and one for the spectator (the <strong>Receiver Page</strong>).</p>
                <ul class="list-disc list-inside mt-3 space-y-2 text-sm">
                    <li><strong>Device 1 (Your Phone):</strong> This is the <strong>remote control app</strong>. It is your hidden command center, controlling the trick from your pocket.</li>
                    <li><strong>Device 2 (Spectator's Phone):</strong> This is the <strong>Receiver Page</strong>. You will use an NFC tag to secretly load it onto the spectator's phone.</li>
                </ul>
                <p class="mt-3">Before you begin, open the remote control app on your device and the Receiver Page on the spectator's phone. Make sure both are connected to the internet.</p>
            </div>
        </div>

        <div class="card">
            <h3 class="card-header">How to Perform: Remote Control Mode</h3>
            <div class="content">
                <p>This is the standard, two-person performance mode. While you focus on the spectator and misdirection, a trusted assistant or collaborator remotely operates the trick using your phone.</p>
                <div class="glow-divider"></div>
                <p><strong>Step 1: Get the Devices Ready</strong><br>
                You open the Receiver Page on the spectator's phone. Tap the screen once to grant camera access, then tap twice to activate the page's <strong>Remote Control Mode</strong> and start listening for your commands.</p>
                <div class="glow-divider"></div>
                <p><strong>Step 2: The Flashlight Effect</strong><br>
                Ask the spectator to think of the name of a special person. As they concentrate, the flashlight on their phone will turn on. Your assistant is now waiting for your cue.</p>
                <div class="glow-divider"></div>
                <p><strong>Step 3: Turning Off the Flashlight</strong><br>
                With the flashlight on, subtly cue your assistant to press the <strong>Power</strong> button on your remote control app. This sends a command that instantly turns off the light on their device.</p>
                <div class="glow-divider"></div>
                <p><strong>Step 4: The Final Reveal</strong><br>
                Now, you can reveal the final effect. Your assistant types the name they were thinking of into the search bar and taps <strong>Search</strong>. Their phone will instantly open a Google search with the secret name they had in mind.</p>
            </div>
        </div>
        
        <div class="card">
            <h3 class="card-header">Advanced Features: Sequence Mode</h3>
            <div class="content">
                <p><strong>Sequence Mode</strong> is a powerful pre-programmed, automated routine that doesn't require remote control during the performance. This is ideal for when you want to create an automated, hands-off effect.</p>
                <div class="glow-divider"></div>
                <p>This mode requires more preparation but offers a hands-free performance. Before the trick, use the Advanced Settings on the <strong>remote control app</strong> to create and apply a custom routine. Your phone serves only as the setup tool; you will not need it during the performance itself.</p>
                <div class="glow-divider"></div>
                <p>To use this mode, the magician taps the spectator's screen <strong>once</strong>. This initial tap will grant camera access and then display a large <strong>Play</strong> button. While you build your misdirection, you can instruct them to tap the button to start the effect. The page will then execute the pre-programmed routine you created, including the flash sequence and the final Google search.</p>
                <ul class="list-disc list-inside mt-3 space-y-2 text-sm">
                    <li><strong>Flash Sequencer:</strong> This feature allows you to build a custom pattern of flashes and delays (e.g., ON, OFF, 500ms, ON). The spectator's phone will then execute this exact pattern when they press the Play button.</li>
                    <li><strong>API Integration:</strong> For an unpredictable element, you can configure the app to fetch a search query from a live API. For example, you can use API services from the famous magic app <strong>Inject</strong> by Greg Rostami. Using Inject, you can set your API and JSON key "value" on the remote control app to integrate this app to your spectator's Google search and reveal it using Nocturnal.</li>
                </ul>
            </div>
        </div>

        <div class="card">
            <h3 class="card-header">Q & A</h3>
            <div class="content">
                <ul class="list-disc list-inside space-y-4 text-sm">
                    <li>
                        <p><strong>Can I perform the trick again with a different person?</strong><br>
                        Yes. The receiver page is designed to clean itself after a performance, so you can start fresh for a new spectator without worrying about the past performance.</p>
                    </li>
                    <li>
                        <p><strong>Can I use this trick in a place with no internet?</strong><br>
                        No. The app relies on a live internet connection to communicate between the receiver and the remote control app A stable Wi-Fi or cellular data connection is essential for the trick to work.</p>
                    </li>
                    <li>
                        <p><strong>Does the spectator's phone need a specific browser?</strong><br>
                        The Receiver Page is designed to work on any modern smartphone browser. For the best performance and compatibility, it is recommended to use the latest version of Chrome, Safari, or Firefox.</p>
                    </li>
                    <li>
                        <p><strong>How do I get the Receiver Page onto the spectator's phone quickly and secretly?</strong><br>
                        The guide suggests using an NFC tag, but a simple and effective method is to use a QR code or a short URL. By generating a QR code for the Receiver Page's URL, you can have the spectator scan it as part of your presentation, creating a seamless and magical experience.</p>
                    </li>
                </ul>
            </div>
        </div>

        <div class="card">
            <h3 class="card-header">Troubleshooting Common Issues</h3>
            <div class="content">
                <ul class="list-disc list-inside space-y-4 text-sm">
                    <li>
                        <p><strong>The flashlight isn't turning on.</strong><br>
                        This is often caused by a lost connection. Check the following:
                        <ul class="list-disc list-inside ml-5 space-y-1 text-xs mt-2">
                            <li>Is the phone connected to the internet?</li>
                            <li>Was camera permission granted? The first tap on the screen is crucial for this.</li>
                        </ul>
                        </p>
                    </li>
                    <li>
                        <p><strong>The search isn't working at the end.</strong><br>
                        This is usually caused by a data synchronization issue. The Receiver Page may not have received the command from your remote control app.
                        <ul class="list-disc list-inside ml-5 space-y-1 text-xs mt-2">
                            <li>Ensure both pages are connected to the internet. The command cannot be sent or received if the connection is lost.</li>
                            <li>If using Sequence Mode with an API, use the <strong>Sync Settings</strong> button on the remote control app to re-fetch the data and ensure it's up to date on both devices.</li>
                        </ul>
                        </p>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    
   <script>
  const cards = document.querySelectorAll('.card');

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        // Bersihkan highlight semua card
        cards.forEach(card => card.classList.remove('active-step'));

        // Highlight card yang sedang aktif
        entry.target.classList.add('active-step');
      }
    });
  }, {
    root: null,
    threshold: 0.3 // minimal 30% card kelihatan baru dianggap aktif
  });

  cards.forEach(card => observer.observe(card));
</script>

</body>
</html>
